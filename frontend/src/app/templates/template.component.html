<div class="templates-container">
  <div class="header">
    <h2>Email Templates</h2>
    <button class="btn-primary" (click)="openForm()">+ New Template</button>
  </div>

  <div class="templates-grid">
    <div class="template-card" *ngFor="let template of templates">
      <h3>{{ template.name }}</h3>
      <p class="subject"><strong>Subject:</strong> {{ template.subject }}</p>
      <p class="date">Created: {{ template.created_at | date }}</p>
      <div class="actions">
        <button class="btn-edit" (click)="openForm(template)">Edit</button>
        <button class="btn-delete" (click)="deleteTemplate(template.id)">Delete</button>
      </div>
    </div>
  </div>

  <div class="modal" *ngIf="showForm">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{ editingTemplate ? 'Edit Template' : 'New Template' }}</h3>
        <button class="close-btn" (click)="closeForm()">Ã—</button>
      </div>
      
      <form (ngSubmit)="saveTemplate()">
        <div class="form-group">
          <label>Template Name</label>
          <input 
            type="text" 
            [(ngModel)]="formData.name" 
            name="name" 
            required 
            placeholder="Enter template name">
        </div>

        <div class="form-group">
          <label>Email Subject</label>
          <input 
            type="text" 
            [(ngModel)]="formData.subject" 
            name="subject" 
            required 
            placeholder="Enter email subject">
        </div>

        <div class="form-group">
          <label>Email Body (HTML)</label>
          <textarea 
            [(ngModel)]="formData.body" 
            name="body" 
            rows="10" 
            required 
            placeholder="Enter email body (HTML supported)"></textarea>
          <small>Use {{'{{'}}variableName{{'}}'}} for dynamic content</small>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary" (click)="closeForm()">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>